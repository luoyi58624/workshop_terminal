import{l as C}from"./login_bg.1706497356364.js";import{u as z}from"./store.1706497356364.js";import{ao as R,b as S,w as H,ap as B,v as D,u as m,d as b,aq as O,r as v,x as w,e as p,f,I as T,a7 as $,J as I,O as e,h as u,Q as L,a1 as r,L as F,aj as V,m as Y,a6 as q,F as J,al as Q,am as U}from"./vue.1706497356364.js";import{a as G,b as P,c as K,d as X}from"./App.1706497356364.js";import{_ as N}from"./_plugin-vue_export-helper.1706497356364.js";import{b as Z,c as ee,d as te,e as se}from"./element-plus.1706497356364.js";function le(c,l){let t,i=!1,s=!1;const a=R();function n(){return m(c)}function y(g){const _=n();let x=0;g.deltaY>0?(i=!1,s||(s=!0,t&&clearInterval(t),t=setInterval(()=>{x-=8,x<-200?(clearInterval(t),s=_.scrollLeft+_.clientWidth>=_.scrollWidth):_.scrollLeft+=8},1))):g.deltaY<0&&(s=!1,i||(i=!0,t&&clearInterval(t),t=setInterval(()=>{x+=8,x>200?(clearInterval(t),i=_.scrollLeft<=0):_.scrollLeft-=8},1)))}function h(g,_=!1){const x=n(),k=n().children[g];if(k!=null){const{offsetLeft:W,clientWidth:j}=k,A=Math.min(x.scrollWidth-x.clientWidth,Math.max(0,W+j/2-x.clientWidth/2));A!=0&&(i=!1,s=!1),x.scrollTo({left:A,behavior:_?"smooth":"instant"})}}G(window,"resize",()=>{i=!1,s=!1}),S(()=>{n().addEventListener("wheel",y),a.run(()=>{(l==null?void 0:l.activeIndex)!=null&&H(l.activeIndex,g=>{h(g,!0)})}),setTimeout(()=>{h(l.activeIndex.value??0)},0)}),B(()=>{setTimeout(()=>{h(l.activeIndex.value??0)},0)}),D(()=>{n().removeEventListener("wheel",y),a.stop()})}const re=["onClick"],oe=["src"],ae={class:"text-sm text-center text-primary"},ne=b({__name:"ProcessTaskList",setup(c){const l=z(),{activeProcessTask:o}=O(l),d=v(),t=v([]);le(d,{activeIndex:o});const i=s=>{switch(s.state){case 0:return e("div",{className:"text-sm text-center bg-green text-primary"},[r("加工中")]);case 1:return e("div",{className:"text-sm text-center bg-primary text-black"},[r("待加工")]);case 2:return e("div",{className:"text-sm text-center bg-red text-primary"},[r("维修中")]);default:return e("div",{className:"text-sm text-center bg-gray text-white"},[r("未知类型")])}};return w(()=>{t.value=Array.from(Array(30).keys()).map(s=>({id:s,name:`CNC${s+1}`,state:Math.floor(Math.random()*3),image:""}))}),(s,a)=>(p(),f("div",{ref_key:"progressTaskScrollRef",ref:d,class:"h-120px mt-2 p-2 shrink-0 flex rounded overflow-x-scroll overflow-y-hidden scrollbar-hide bg-info/80 [&>div]:h-full [&>div]:px-1 [&>div]:pt-1 [&>div]:select-none [&>div]:rounded [&>div]:flex [&>div]:flex-col [&>div]:aspect-[5/4] [&>div]:cursor-pointer [&>div]:bg-info [&>div:not(:first-child)]:ml-2"},[(p(!0),f(T,null,$(m(t),n=>(p(),f("div",{key:n.id,class:I([m(o)===n.id&&"bg-secondPrimary!"]),onClick:y=>o.value=n.id},[e(i,{state:n.state},null,8,["state"]),u("img",{src:m(C),alt:"加工图",class:"grow"},null,8,oe),u("div",ae,L(n.name),1)],10,re))),128))],512))}}),ce={},ie={class:"i-mdi:search text-primary cursor-pointer"};function ue(c,l){return p(),f("div",ie)}const M=N(ce,[["render",ue]]),de={class:"rounded bg-info/80 xs:w-full lg:h-full lg:w-80 lg:shrink-0"},me={class:"p-2 xs:hidden md:flex md:flex-row md:justify-between lg:flex lg:flex-col"},pe=b({__name:"InfoPanel",setup(c){const l=V();P();const o=v([]);K("collapse_info",!1);function d(){l.push("/test")}function t(){}w(()=>{o.value=[{time:"今日",finishCount:2,planTime:4},{time:"昨日",finishCount:2,planTime:4},{time:"本周",finishCount:2,planTime:4},{time:"本月",finishCount:2,planTime:4}]});const i=()=>e("div",{class:"flex rounded overflow-hidden bg-info xs:h-36 xs:w-60 xs:shrink-0 lg:h-36 lg:w-full"},[e("div",{class:"grow py-8 text-sky xs:text-sm xs:pl-2 lg:text-base lg:pl-4"},[e("p",null,[r("姓名："),"吴佳乐"]),e("p",{class:"my-2"},[r("工作中心："),"CNC"]),e("p",null,[r("机台编号："),"CNC10"])]),e("img",{src:C,alt:"头像",class:"h-full aspect-[3/4]"},null)]),s=()=>e("div",{class:"xs:w-60 xs:my-0 xs:mx-4 xs:text-sm lg:w-full lg:my-8 lg:mx-0 lg:text-base"},[e("div",{class:"flex justify-between xs:items-center lg:items-end"},[e("p",{class:"text-red-5 font-bold"},[r("加工中信息")]),e("a",{class:"xs:text-xs lg:text-sm cursor-pointer text-white",onClick:d},[r("查看更多 >")])]),e("p",{class:"text-primary mt-1"},[r("生产订单："),"PO23140122003"]),e("p",{class:"text-primary xs:mt-0 lg:mt-1"},[r("物料编码："),"BC-210229-A002"]),e("div",{class:"flex"},[e("span",{class:"text-primary xs:mt-0 lg:mt-1"},[r("计划工时："),"4H"]),e("span",{class:"text-primary ml-8 xs:mt-0 lg:mt-1"},[r("数量："),"2"])]),e("p",{class:"text-primary xs:mt-0 lg:mt-1"},[r("计划开始："),"2024-01-22 10:30"]),e("p",{class:"text-primary xs:mt-0 lg:mt-1"},[r("计划结束："),"2024-02-06 16:00"]),e("p",{class:"text-primary flex xs:mt-0 lg:mt-1"},[r("附件图纸："),e(M,{class:"ml-2",onClick:t},null)])]),a=()=>e("div",{class:" xs:w-60 xs:my-0 xs:text-sm lg:w-full lg:my-8 lg:text-base"},[e("p",{class:"text-red-5 font-bold"},[r("完工信息小计")]),e("table",{class:"w-full mt-2"},[e("thead",null,[e("tr",{class:"bg-info w-full"},[e("th",{class:"text-primary xs:py-1 lg:py-2"},[r("时段")]),e("th",{class:"text-primary"},[r("完成数量")]),e("th",{class:"text-primary"},[r("计划工时")])])]),o.value.map(n=>e("tr",{class:"text-center"},[e("td",{class:"text-primary xs:py-0 lg:py-1"},[n.time]),e("td",{class:"text-primary"},[n.finishCount]),e("td",{class:"text-primary"},[n.planTime])]))])]);return(n,y)=>{const h=Z;return p(),f("div",de,[e(h,null,{default:F(()=>[u("div",me,[e(i),e(s),e(a)])]),_:1})])}}}),fe={class:"px-4 shrink-0 flex xs:flex-row xs:justify-around xs:items-center lg:h-full lg:flex-col lg:justify-center"},xe=["onClick"],_e=b({__name:"ProcessButtons",setup(c){const l=v(0),o=v([]);function d(t){l.value=t}return w(()=>{o.value=[{id:0,name:"开始加工"},{id:1,name:"部分完成"},{id:2,name:"全部完成"},{id:3,name:"取消加工"}]}),(t,i)=>(p(),f("div",fe,[(p(!0),f(T,null,$(m(o),s=>(p(),f("button",{key:s.id,class:I(["xs:px-2 xs:py-1 xs:text-xs sm:px-4 sm:py-2 sm:text-sm border-2 border-white text-primary xs:my-2 lg:mt-4",[m(l)===s.id?"base-btn-secondPrimary":"base-btn-info"]]),onClick:a=>d(s.id)},L(s.name),11,xe))),128))]))}});function he(c){let l=0;function o(d){l=d.target.scrollTop}B(()=>{m(c).setScrollTop(l)}),S(()=>{m(c).$refs.bodyWrapper.addEventListener("scroll",o,!0)}),D(()=>{m(c).$refs.bodyWrapper.removeEventListener("scroll",o)})}function ge(c){return Array.from(Array(c).keys())}const E=c=>(Q("data-v-53530b88"),c=c(),U(),c),ve={class:"flex grow rounded flex-col bg-info/80 xs:w-full xs:h-full lg:w-0 lg:h-full"},ye={class:"h-10 shrink-0 flex justify-between items-center px-2"},be=E(()=>u("h5",{class:"text-red-5"},"待加工零件信息",-1)),we={class:"flex items-center"},Fe=E(()=>u("input",{class:"px-1 md:py-2px mr-2 rounded",placeholder:"请输入查询条件"},null,-1)),Ee={class:"grow w-full h-0"},ke={class:"w-full h-full flex-center"},Ae={class:"h-10 shrink-0 flex justify-between items-center px-2"},Ce={class:"flex items-center"},Se={class:"px-1 md:py-2px mr-2 rounded",placeholder:"请输入确认号或指令"},Be=E(()=>u("div",{class:"i-mdi:search text-primary"},null,-1)),De=b({__name:"ProcessTable",setup(c){const l=P(),o=v([]),d=v();return he(d),Y(()=>{const t=o.value.filter(i=>i.selected).length;return 0<t&&t<o.value.length}),w(()=>{o.value=ge(20).map(t=>({selected:!1,id:t,code:`M${t}`,code1:"M230102-A001",code2:"P00000000012",code3:"10",code4:"00000000",code5:"20",start_time:"2023-12-01 13:00",end_time:"2023-12-01 13:00",time:"10"}))}),(t,i)=>{const s=M,a=ee,n=te,y=se,h=q("focus");return p(),f("div",ve,[u("div",ye,[be,u("div",we,[Fe,e(s)])]),u("div",Ee,[e(n,{ref_key:"tableRef",ref:d,class:"process-table",width:"100%",height:"100%",data:m(o)},{default:F(()=>[e(a,{type:"selection",width:"55",fixed:"",align:"center"}),e(a,{property:"code",label:"项目号","min-width":"120",align:"center"}),e(a,{property:"code1",label:"物料编号","min-width":"140",align:"center"}),e(a,{property:"code2",label:"生产订单","min-width":"140",align:"center"}),e(a,{property:"code3",label:"工序号",width:"70",align:"center"}),e(a,{property:"code4",label:"确认号",width:"120",align:"center"}),e(a,{property:"code5",label:"数量",width:"60",align:"center"}),e(a,{property:"start_time",label:"计划开始","min-width":"160",align:"center"}),e(a,{property:"end_time",label:"计划结束","min-width":"160",align:"center"}),e(a,{property:"time",label:"工时",width:"60",align:"center"}),e(a,{label:"图纸",width:"60",align:"center",fixed:"right"},{default:F(g=>[u("div",ke,[e(s)])]),_:1})]),_:1},8,["data"])]),u("div",Ae,[u("div",Ce,[J(u("input",Se,null,512),[[h]]),Be]),e(y,{class:"process-pagination",layout:"pager",total:50,background:"",small:m(l).width<m(X).md},null,8,["small"])])])}}}),Te=N(De,[["__scopeId","data-v-53530b88"]]),$e={class:"grow flex flex-col"},Ie={class:"h-0 mt-2 grow flex xs:flex-col lg:flex-row"},ze=b({__name:"index",setup(c){return(l,o)=>(p(),f("div",$e,[e(ne),u("div",Ie,[e(pe),e(_e),e(Te)])]))}});export{ze as default};
